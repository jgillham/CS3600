<project name = "HW3: Resource Allocation" default = "run" basedir = ".">
    <!-- Project properties -->
    <property name="source" location="src"/>
    <property name="target.base" location="build"/>
    <property name="target" location="${target.base}/classes"/>
    <property name="target.zip" location="HW3_ResourceAllocation.zip"/>

    <!-- Create a zip file for the professor. -->
    <target name = "zip">
        <zip destfile = "${target.zip}">
            <fileset dir = "." includes = "**/*.java"/>
            <fileset dir = "." includes = "**/*.bluej"/>
            <fileset dir = "." includes = "**/*.txt"/>
            <fileset dir = "." includes = "**/*.xml"/>
        </zip>
    </target>

    <!-- Clean up autogenerated files. -->
    <target name = "clean">
        <delete>
            <fileset dir = "." includes="**/*.zip"/>
            <fileset dir = "." includes="**/*.class"/>
            <fileset dir = "." includes="**/*.ctxt"/>
        </delete>
        <delete dir = "${target.base}"/>
        <delete dir = "doc"/>
    </target>

    <!-- Compile source. -->
    <target name = "build">
        <mkdir dir = "${target.base}"/>
        <mkdir dir = "${target}"/>
        <javac srcdir = "${source}" destdir = "${target}" debug = "on"
         classpath = "${target}">
        </javac>
    </target>

    <!-- Run the program. -->
    <target name = "run" depends = "build">
        <java classname = "Project3" classpath = "${target}" 
         failonerror = "true" >
            <!-- Algorithm number -->
            <arg value = "1"/>
            <arg value = "3"/>
            <arg value = "100"/>
        </java>
    </target>

    <!-- We need test units. -->
    <target name = "testAll" depends = "build">
        <junit printsummary = "yes" haltonfailure = "true">
            <formatter type = "plain" usefile = "false"/>
            <classpath>
                <pathelement path = "${target}"/>
            </classpath>
            <!--<test name = "TestClassName"/>-->
        </junit>
    </target>
</project>
